<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math. Discrètes - R1.06</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel pour le JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Styles personnalisés pour l'animation -->
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        /* Fix pour le scroll mobile fluide */
        .sidebar-scroll {
            -webkit-overflow-scrolling: touch;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICÔNES (Reconstitution des composants Lucide pour le mode fichier unique) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const Brain = (props) => <IconBase {...props}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></IconBase>;
        const Calculator = (props) => <IconBase {...props}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>;
        const Menu = (props) => <IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconBase>;
        const X = (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 18 12"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconBase>;
        const Book = (props) => <IconBase {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></IconBase>;
        const Sigma = (props) => <IconBase {...props}><path d="M18 7V4H6l6 8-6 8h12v-3"/></IconBase>;
        const Network = (props) => <IconBase {...props}><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Eye = (props) => <IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const EyeOff = (props) => <IconBase {...props}><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/></IconBase>;
        const Layers = (props) => <IconBase {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></IconBase>;
        const ArrowRightLeft = (props) => <IconBase {...props}><path d="m16 21 4-4-4-4"/><path d="M20 17H4"/><path d="m8 7-4 4 4 4"/><path d="M4 11h16"/></IconBase>;

        // --- DONNÉES DU COURS (ENRICHIES) ---
        const courseData = {
          ensembles: {
            title: "1. Ensembles",
            icon: <BookOpen className="w-6 h-6" />,
            content: [
              {
                subtitle: "Définitions fondamentales",
                text: (
                  <div className="space-y-2">
                    <p>Un ensemble est une collection d'objets distincts. L'ensemble vide est noté <strong>Ø</strong>.</p>
                    <p><strong>Cardinalité (Card(E)) :</strong> Nombre d'éléments dans un ensemble fini.</p>
                    <p><strong>Sous-ensemble (Inclusion ⊆) :</strong> A ⊆ B si tout élément de A appartient à B.
                       <br/><span className="text-sm text-gray-500 italic">Propriétés : Réflexive (A⊆A), Antisymétrique (A⊆B et B⊆A ⇒ A=B), Transitive.</span>
                    </p>
                  </div>
                )
              },
              {
                subtitle: "Représentations",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li><strong>Extension :</strong> Liste explicite entre accolades (ex: {'{a, b, c}'}). Ordre non significatif.</li>
                    <li><strong>Compréhension :</strong> Par une propriété logique (ex: {'{x ∈ N | x < 5}'}).</li>
                    <li><strong>Diagrammes de Venn :</strong> Représentation graphique par des "patatoïdes" pour visualiser les intersections/unions.</li>
                  </ul>
                )
              },
              {
                subtitle: "Opérations Ensemblistes",
                text: (
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div className="p-2 border rounded bg-gray-50">
                      <strong>Union (A ∪ B)</strong><br/>
                      x ∈ A OU x ∈ B.
                    </div>
                    <div className="p-2 border rounded bg-gray-50">
                      <strong>Intersection (A ∩ B)</strong><br/>
                      x ∈ A ET x ∈ B.
                    </div>
                    <div className="p-2 border rounded bg-gray-50">
                      <strong>Complémentaire (Ā)</strong><br/>
                      x ∉ A (dans le référentiel E).
                    </div>
                    <div className="p-2 border rounded bg-gray-50">
                      <strong>Différence (A \ B)</strong><br/>
                      x ∈ A et x ∉ B.
                    </div>
                  </div>
                )
              },
              {
                subtitle: "Ensemble des parties P(E)",
                text: "L'ensemble de tous les sous-ensembles de E. Si Card(E) = n, alors Card(P(E)) = 2^n."
              }
            ]
          },
          relations: {
            title: "2. Relations & Applications",
            icon: <Network className="w-6 h-6" />,
            content: [
              {
                subtitle: "Produit Cartésien & Relations",
                text: (
                  <div className="space-y-2">
                      <p><strong>X × Y :</strong> Ensemble des couples {(x, y)}. Cardinal = Card(X) × Card(Y).</p>
                      <p><strong>Relation binaire :</strong> Sous-ensemble R ⊆ X × Y. On note xRy.</p>
                      <p><strong>Représentations :</strong> Sagittale (flèches), Matricielle (0/1), Graphique (points).</p>
                  </div>
                )
              },
              {
                subtitle: "Fonctions vs Applications",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li><strong>Fonction :</strong> Chaque x a <em>au plus</em> une image.</li>
                    <li><strong>Application :</strong> Chaque x a <em>exactement</em> une image (Domaine = Ensemble de départ).</li>
                    <li><strong>Ensemble des applications Y^X :</strong> Cardinal = Card(Y)^Card(X).</li>
                  </ul>
                )
              },
              {
                subtitle: "Propriétés remarquables",
                text: (
                  <div className="space-y-3 mt-2">
                    <div className="p-2 bg-blue-50 rounded border-l-4 border-blue-500">
                      <strong>Injection :</strong> "Jamais 2 flèches sur la même cible".<br/>
                      ∀x1,x2, f(x1)=f(x2) ⇒ x1=x2.
                    </div>
                    <div className="p-2 bg-green-50 rounded border-l-4 border-green-500">
                      <strong>Surjection :</strong> "Toutes les cibles sont atteintes".<br/>
                      ∀y ∈ Y, ∃x ∈ X, f(x)=y.
                    </div>
                    <div className="p-2 bg-purple-50 rounded border-l-4 border-purple-500">
                      <strong>Bijection :</strong> "Couples parfaits". Injective ET Surjective.<br/>
                      Admet une application réciproque f⁻¹.
                    </div>
                  </div>
                )
              },
              {
                subtitle: "Composition & Indicatrice",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li><strong>Composition (g ∘ f) :</strong> (g ∘ f)(x) = g(f(x)). Attention à l'ordre !</li>
                    <li><strong>Fonction Indicatrice (I_A) :</strong> Vaut 1 si x ∈ A, 0 sinon. Lien fort avec la matrice booléenne.</li>
                  </ul>
                )
              }
            ]
          },
          interne: {
            title: "3. Relations Internes (STAR)",
            icon: <Star className="w-6 h-6" />,
            content: [
              {
                subtitle: "Les 4 Propriétés STAR",
                text: (
                  <div className="grid gap-2">
                      <div className="flex items-center gap-2"><span className="font-bold w-6 text-blue-600">S</span> Symétrique : xRy ⇒ yRx (matrice symétrique).</div>
                      <div className="flex items-center gap-2"><span className="font-bold w-6 text-blue-600">T</span> Transitive : xRy et yRz ⇒ xRz.</div>
                      <div className="flex items-center gap-2"><span className="font-bold w-6 text-blue-600">A</span> Antisymétrique : xRy et yRx ⇒ x=y (pas de double flèche sauf boucle).</div>
                      <div className="flex items-center gap-2"><span className="font-bold w-6 text-blue-600">R</span> Réflexive : xRx pour tout x (diagonale de 1).</div>
                  </div>
                )
              },
              {
                subtitle: "Relation d'Équivalence (RST)",
                text: (
                  <div className="space-y-2">
                      <p>Sert à "classer" les objets. Ex: "avoir la même couleur".</p>
                      <p><strong>Classe d'équivalence [x] :</strong> Tous les éléments en relation avec x.</p>
                      <p><strong>Partition :</strong> Les classes d'équivalence découpent l'ensemble E en parties disjointes dont la réunion fait E.</p>
                      <p><strong>Ensemble Quotient (E/R) :</strong> L'ensemble des classes d'équivalence.</p>
                  </div>
                )
              },
              {
                subtitle: "Relation d'Ordre (RAT)",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li>Sert à "ranger" ou "hiérarchiser". Ex: ≤, ⊆.</li>
                    <li><strong>Ordre Total :</strong> Tous les éléments sont comparables (ex: ≤ sur R).</li>
                    <li><strong>Ordre Partiel :</strong> Certains éléments ne sont pas comparables (ex: ⊆ sur P(E)).</li>
                  </ul>
                )
              },
              {
                subtitle: "Préordre (RT)",
                text: "Réflexif et Transitif. Moins strict que l'ordre (ex: 'pouvoir aller de A à B' dans un graphe)."
              }
            ]
          },
          logique: {
            title: "4. Logique & Prédicats",
            icon: <Brain className="w-6 h-6" />,
            content: [
              {
                subtitle: "Calcul Propositionnel",
                text: (
                  <div className="space-y-2">
                      <p><strong>Propositions :</strong> Énoncés vrais (1) ou faux (0).</p>
                      <p><strong>Tautologie :</strong> Toujours vrai (ex: p ∨ ¬p).</p>
                      <p><strong>Contradiction :</strong> Toujours faux (ex: p ∧ ¬p).</p>
                      <p><strong>Implication (p ⇒ q) :</strong> Faux seulement si p=1 et q=0. Équivalent à ¬p ∨ q.</p>
                  </div>
                )
              },
              {
                subtitle: "Prédicats & Ensembles",
                text: (
                  <div className="p-3 bg-gray-50 rounded border text-sm">
                    <p>Un prédicat P(x) devient une proposition quand on fixe x.</p>
                    <p><strong>Lien Logique-Ensemble :</strong></p>
                    <ul className="list-none pl-2 mt-1 space-y-1">
                       <li>P(x) OU Q(x) ↔ Union A ∪ B</li>
                       <li>P(x) ET Q(x) ↔ Intersection A ∩ B</li>
                       <li>NON P(x) ↔ Complémentaire Ā</li>
                       <li>P(x) ⇒ Q(x) ↔ Inclusion A ⊆ B</li>
                    </ul>
                  </div>
                )
              },
              {
                subtitle: "Quantificateurs",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li><strong>Universel (∀) :</strong> "Pour tout". Négation : ∃... tel que NON...</li>
                    <li><strong>Existentiel (∃) :</strong> "Il existe au moins un". Négation : ∀... NON...</li>
                  </ul>
                )
              },
              {
                subtitle: "Méthodes de Preuve",
                text: (
                  <ul className="list-disc pl-5 space-y-1">
                    <li><strong>Modus Ponens :</strong> (p ∧ (p⇒q)) ⇒ q.</li>
                    <li><strong>Contraposée :</strong> Montrer ¬q ⇒ ¬p pour prouver p ⇒ q.</li>
                    <li><strong>Absurde :</strong> Supposer ¬P, aboutir à une contradiction (⊥), donc P est vrai.</li>
                    <li><strong>Récurrence :</strong> 1. Initialisation (P(0)). 2. Hérédité (supposer P(n), montrer P(n+1)). 3. Conclusion.</li>
                  </ul>
                )
              }
            ]
          }
        };

        const cheatSheetData = {
          candimatica: [
            { letter: "C", name: "Commutativité", desc: "A ∪ B = B ∪ A" },
            { letter: "A", name: "Associativité", desc: "(A ∪ B) ∪ C = A ∪ (B ∪ C)" },
            { letter: "N", name: "Neutralité", desc: "A ∪ Ø = A" },
            { letter: "D", name: "Distributivité", desc: "A ∪ (B ∩ C) = (A ∪ B) ∩ (A ∪ C)" },
            { letter: "I", name: "Idempotence", desc: "A ∪ A = A" },
            { letter: "M", name: "Morgan", desc: "NON(A ∪ B) = NON(A) ∩ NON(B)" },
            { letter: "A", name: "Absorption 1", desc: "A ∪ E = E" },
            { letter: "T", name: "Tiers exclu", desc: "A ∪ NON(A) = E" },
            { letter: "I", name: "Involution", desc: "NON(NON(A)) = A" },
            { letter: "C", name: "Contradiction", desc: "A ∩ NON(A) = Ø" },
            { letter: "A", name: "Absorption 2", desc: "A ∪ (A ∩ B) = A" },
          ]
        };

        const exercisesData = [
          {
            id: 1,
            source: "TD1 - Ex 1",
            question: "Soit E = {a,b,c,d,e}, A = {a,b,c} et B = {b,c,d}. Quel est A ∩ B ?",
            options: ["{a,b,c,d}", "{b,c}", "{a,d}", "{a,b,c,d,e}"],
            answer: 1,
            explanation: "L'intersection contient les éléments communs à A et B. Ici, 'b' et 'c' sont dans les deux ensembles."
          },
          {
            id: 2,
            source: "TD2 - Ex 5",
            question: "Soit f(x) = x². Quelle est l'image réciproque f⁻¹({4}) dans Z ?",
            options: ["{2}", "{-2}", "{2, -2}", "Ø"],
            answer: 2,
            explanation: "On cherche les x entiers tels que x² = 4. Ce sont 2 et -2."
          },
          {
            id: 3,
            source: "TD6 - Star",
            question: "Une relation d'équivalence doit être :",
            options: ["Réflexive, Symétrique, Transitive", "Réflexive, Antisymétrique, Transitive", "Juste Transitive", "Symétrique et Antisymétrique"],
            answer: 0,
            explanation: "C'est le mnémotechnique RST (Réflexive, Symétrique, Transitive)."
          },
          {
            id: 4,
            source: "TD4 - Logique",
            question: "Quelle est la négation de '∀x, P(x)' ?",
            options: ["∀x, ¬P(x)", "∃x, P(x)", "∃x, ¬P(x)", "¬∃x, P(x)"],
            answer: 2,
            explanation: "La négation de 'pour tout' est 'il existe au moins un contre-exemple'."
          },
          {
            id: 5,
            source: "TD7 - Récurrence",
            question: "Dans une récurrence, que prouve-t-on lors de l'hérédité ?",
            options: ["P(0) est vraie", "P(n) est vraie", "P(n) ⇒ P(n+1)", "P(n+1) est vraie sans condition"],
            answer: 2,
            explanation: "L'hérédité consiste à montrer que SI la propriété est vraie au rang n, ALORS elle l'est au rang n+1."
          }
        ];

        // --- COMPOSANTS ---

        const CourseSection = ({ data }) => (
          <div className="space-y-6 animate-fadeIn">
            <div className="flex items-center gap-3 border-b pb-4 mb-6">
              <div className="p-3 bg-blue-100 text-blue-600 rounded-lg">
                {data.icon}
              </div>
              <h2 className="text-2xl font-bold text-gray-800">{data.title}</h2>
            </div>
            <div className="grid gap-6">
              {data.content.map((block, idx) => (
                <div key={idx} className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                  <h3 className="text-lg font-semibold text-blue-700 mb-3">{block.subtitle}</h3>
                  <div className="text-gray-600 leading-relaxed">{block.text}</div>
                </div>
              ))}
            </div>
          </div>
        );

        const Candimatica = () => (
          <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div className="bg-indigo-600 p-4 text-white">
              <h3 className="text-xl font-bold flex items-center gap-2">
                <Star className="fill-current" /> CANDIMATICA
              </h3>
              <p className="text-indigo-100 text-sm">Moyen mnémotechnique pour les propriétés booléennes & ensemblistes</p>
            </div>
            <div className="divide-y divide-gray-100">
              {cheatSheetData.candimatica.map((item, idx) => (
                <div key={idx} className="p-4 flex items-center hover:bg-gray-50">
                  <div className="w-10 h-10 flex-shrink-0 bg-indigo-100 text-indigo-700 rounded-full flex items-center justify-center font-bold text-xl mr-4">
                    {item.letter}
                  </div>
                  <div>
                    <p className="font-semibold text-gray-800">{item.name}</p>
                    <p className="text-gray-500 font-mono text-sm">{item.desc}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        );

        const ExerciseCard = ({ ex }) => {
          const [selected, setSelected] = useState(null);
          const [showExplanation, setShowExplanation] = useState(false);

          const isCorrect = selected === ex.answer;

          return (
            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-4">
              <div className="flex justify-between items-start mb-4">
                <span className="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded font-mono">{ex.source}</span>
              </div>
              <h4 className="text-lg font-medium text-gray-800 mb-4">{ex.question}</h4>
              <div className="space-y-2">
                {ex.options.map((opt, idx) => (
                  <button
                    key={idx}
                    onClick={() => { setSelected(idx); setShowExplanation(true); }}
                    className={`w-full text-left p-3 rounded-lg border transition-all ${
                      selected === idx 
                        ? idx === ex.answer 
                          ? 'bg-green-50 border-green-200 text-green-700' 
                          : 'bg-red-50 border-red-200 text-red-700'
                        : 'border-gray-200 hover:border-blue-300 hover:bg-blue-50'
                    }`}
                  >
                    <div className="flex items-center justify-between">
                      <span>{opt}</span>
                      {selected === idx && (
                        idx === ex.answer ? <CheckCircle className="w-5 h-5" /> : <AlertCircle className="w-5 h-5" />
                      )}
                    </div>
                  </button>
                ))}
              </div>
              {showExplanation && (
                <div className={`mt-4 p-4 rounded-lg text-sm ${isCorrect ? 'bg-green-50 text-green-800' : 'bg-blue-50 text-blue-800'}`}>
                  <strong>Explication :</strong> {ex.explanation}
                </div>
              )}
            </div>
          );
        };

        const TruthTable = () => {
          const [p, setP] = useState(false);
          const [q, setQ] = useState(false);

          return (
            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
              <h3 className="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <Calculator className="w-5 h-5" /> Simulateur Logique
              </h3>
              <div className="flex gap-4 mb-6">
                <button 
                  onClick={() => setP(!p)}
                  className={`px-4 py-2 rounded-lg font-bold transition-colors ${p ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'}`}
                >
                  P = {p ? 'VRAI' : 'FAUX'}
                </button>
                <button 
                  onClick={() => setQ(!q)}
                  className={`px-4 py-2 rounded-lg font-bold transition-colors ${q ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-600'}`}
                >
                  Q = {q ? 'VRAI' : 'FAUX'}
                </button>
              </div>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div className="p-3 bg-gray-50 rounded border">
                  <div className="text-xs text-gray-500 mb-1">ET (P ∧ Q)</div>
                  <div className={`font-bold ${p && q ? 'text-green-600' : 'text-red-500'}`}>{p && q ? '1' : '0'}</div>
                </div>
                <div className="p-3 bg-gray-50 rounded border">
                  <div className="text-xs text-gray-500 mb-1">OU (P ∨ Q)</div>
                  <div className={`font-bold ${p || q ? 'text-green-600' : 'text-red-500'}`}>{p || q ? '1' : '0'}</div>
                </div>
                <div className="p-3 bg-gray-50 rounded border">
                  <div className="text-xs text-gray-500 mb-1">IMPLIQUE (P ⇒ Q)</div>
                  <div className={`font-bold ${!p || q ? 'text-green-600' : 'text-red-500'}`}>{!p || q ? '1' : '0'}</div>
                </div>
                <div className="p-3 bg-gray-50 rounded border">
                  <div className="text-xs text-gray-500 mb-1">ÉQUIVAUT (P ⇔ Q)</div>
                  <div className={`font-bold ${p === q ? 'text-green-600' : 'text-red-500'}`}>{p === q ? '1' : '0'}</div>
                </div>
              </div>
              <p className="text-xs text-gray-400 mt-2 text-center">Cliquez sur P et Q pour changer leur valeur de vérité.</p>
            </div>
          );
        };

        // --- MAIN APP ---

        function App() {
          const [activeTab, setActiveTab] = useState('cours');
          const [activeChapter, setActiveChapter] = useState('ensembles');
          const [isSidebarOpen, setSidebarOpen] = useState(false);
          const [showAnswerKey, setShowAnswerKey] = useState(false);

          const toggleSidebar = () => setSidebarOpen(!isSidebarOpen);

          const renderContent = () => {
            if (activeTab === 'cours') {
              return <CourseSection data={courseData[activeChapter]} />;
            }
            if (activeTab === 'fiches') {
              return (
                <div className="space-y-6 animate-fadeIn">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">Fiches Mémoire</h2>
                  <div className="grid md:grid-cols-2 gap-6">
                    <Candimatica />
                    <TruthTable />
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 md:col-span-2">
                       <h3 className="text-lg font-bold text-gray-800 mb-3">Rappel : Propriétés STAR (Relations)</h3>
                       <div className="overflow-x-auto">
                         <table className="w-full text-sm text-left text-gray-600">
                           <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                             <tr>
                               <th className="px-6 py-3">Type</th>
                               <th className="px-6 py-3">Réflexive</th>
                               <th className="px-6 py-3">Symétrique</th>
                               <th className="px-6 py-3">Antisymétrique</th>
                               <th className="px-6 py-3">Transitive</th>
                             </tr>
                           </thead>
                           <tbody>
                             <tr className="bg-white border-b">
                               <td className="px-6 py-4 font-medium text-gray-900">Équivalence</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                               <td className="px-6 py-4 text-red-400">Non</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                             </tr>
                             <tr className="bg-white border-b">
                               <td className="px-6 py-4 font-medium text-gray-900">Ordre</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                               <td className="px-6 py-4 text-red-400">Non</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                             </tr>
                             <tr className="bg-white">
                               <td className="px-6 py-4 font-medium text-gray-900">Préordre</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                               <td className="px-6 py-4 text-gray-400">-</td>
                               <td className="px-6 py-4 text-gray-400">-</td>
                               <td className="px-6 py-4 text-green-600">Oui</td>
                             </tr>
                           </tbody>
                         </table>
                       </div>
                    </div>
                  </div>
                </div>
              );
            }
            if (activeTab === 'exercices') {
              return (
                <div className="max-w-3xl mx-auto animate-fadeIn">
                  <div className="flex justify-between items-center mb-6">
                    <h2 className="text-2xl font-bold text-gray-800">Entraînement (Extraits TD1-7)</h2>
                    <button 
                      onClick={() => window.location.reload()} 
                      className="text-sm text-blue-600 hover:underline"
                    >
                      Réinitialiser
                    </button>
                  </div>
                  {exercisesData.map((ex) => (
                    <ExerciseCard key={ex.id} ex={ex} />
                  ))}
                  
                  <div className="mt-8 bg-yellow-50 p-6 rounded-xl border border-yellow-100">
                      <h3 className="font-bold text-yellow-800 mb-2 flex items-center gap-2">
                        <Eye className="w-4 h-4" /> Exercice Réflexion (TD7 - Ex 4)
                      </h3>
                      <p className="text-yellow-800 text-sm mb-4">
                        <strong>Prouver par l'absurde que l'ensemble des nombres premiers est infini.</strong>
                      </p>
                      <button 
                       onClick={() => setShowAnswerKey(!showAnswerKey)}
                       className="px-4 py-2 bg-yellow-100 text-yellow-800 rounded text-sm font-semibold hover:bg-yellow-200 transition"
                      >
                        {showAnswerKey ? "Masquer la preuve" : "Voir la preuve"}
                      </button>
                      
                      {showAnswerKey && (
                        <div className="mt-4 text-sm text-gray-700 bg-white p-4 rounded border border-yellow-100">
                          1. Supposons P fini : P = {'{p1, ..., pn}'}.<br/>
                          2. Posons m = p1×...×pn + 1.<br/>
                          3. m &gt; 1, donc m admet un diviseur premier p.<br/>
                          4. Ce p doit être dans P (car P contient TOUS les premiers).<br/>
                          5. Donc p divise le produit (p1...pn).<br/>
                          6. Comme p divise m et le produit, p divise leur différence : m - (p1...pn) = 1.<br/>
                          7. Or p divise 1 est impossible pour un premier.<br/>
                          <strong>Conclusion : Contradiction, donc P est infini.</strong>
                        </div>
                      )}
                  </div>
                </div>
              );
            }
          };

          return (
            <div className="min-h-screen bg-gray-50 font-sans text-gray-900 flex flex-col md:flex-row">
              
              {/* MOBILE HEADER */}
              <div className="md:hidden bg-white border-b p-4 flex justify-between items-center sticky top-0 z-20">
                <h1 className="font-bold text-blue-700 flex items-center gap-2">
                  <Sigma className="w-6 h-6" /> Math. Discrètes
                </h1>
                <button onClick={toggleSidebar} className="p-2 text-gray-600">
                  {isSidebarOpen ? <X /> : <Menu />}
                </button>
              </div>

              {/* SIDEBAR */}
              <aside className={`fixed inset-y-0 left-0 bg-white border-r w-64 transform ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 transition-transform duration-200 ease-in-out z-10 md:sticky md:top-0 h-screen sidebar-scroll overflow-y-auto pt-20 md:pt-0`}>
                <div className="p-6 border-b hidden md:block">
                  <h1 className="font-bold text-xl text-blue-700 flex items-center gap-2">
                    <Sigma className="w-6 h-6" /> R1.06 Révision
                  </h1>
                  <p className="text-xs text-gray-400 mt-1">IUTV BUT1 Informatique</p>
                </div>

                <nav className="p-4 space-y-8 pb-20">
                  <div>
                    <h3 className="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3">Navigation</h3>
                    <ul className="space-y-1">
                      <li>
                        <button 
                          onClick={() => { setActiveTab('cours'); setSidebarOpen(false); }}
                          className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'cours' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'}`}
                        >
                          <Book className="w-4 h-4" /> Cours
                        </button>
                      </li>
                      <li>
                        <button 
                          onClick={() => { setActiveTab('fiches'); setSidebarOpen(false); }}
                          className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'fiches' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'}`}
                        >
                          <Star className="w-4 h-4" /> Fiches (CANDIMATICA)
                        </button>
                      </li>
                      <li>
                        <button 
                          onClick={() => { setActiveTab('exercices'); setSidebarOpen(false); }}
                          className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === 'exercices' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'}`}
                        >
                          <CheckCircle className="w-4 h-4" /> Exercices & Quiz
                        </button>
                      </li>
                    </ul>
                  </div>

                  {activeTab === 'cours' && (
                    <div>
                      <h3 className="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3">Chapitres</h3>
                      <ul className="space-y-1">
                        {Object.entries(courseData).map(([key, data]) => (
                          <li key={key}>
                            <button
                              onClick={() => { setActiveChapter(key); setSidebarOpen(false); }}
                              className={`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${activeChapter === key ? 'bg-gray-100 text-gray-900 font-medium' : 'text-gray-500 hover:text-gray-900'}`}
                            >
                              <span className="truncate">{data.title.split('. ')[1]}</span>
                              {activeChapter === key && <ChevronRight className="w-3 h-3" />}
                            </button>
                          </li>
                        ))}
                      </ul>
                    </div>
                  )}
                </nav>
              </aside>

              {/* MAIN CONTENT */}
              <main className="flex-1 p-4 md:p-8 overflow-y-auto">
                {renderContent()}
              </main>

            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
